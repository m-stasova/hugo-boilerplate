{{/*
@section: Pricing with Comparison Table
@description: A comprehensive pricing section that displays multiple pricing tiersComparison with a detailed feature comparison table, including both mobile and desktop views.
@params:
  - taglineComparison: Text above the heading (optional, default: "Pricing")
  - headingComparison: Main heading text (optional, default: "Pricing that grows with you")
  - descriptionComparison: Text below the heading (optional, default: "Choose an affordable plan...")
  - backgroundColorComparison: Background color for the section (optional, default: "white")
  - taglineColorComparison: Color for the tagline text (optional, default: "indigo-600")
  - headingColorComparison: Color for the heading text (optional, default: "gray-900")
  - descriptionColorComparison: Color for the description text (optional, default: "gray-600")
  - checkColorComparison: Color for the checkmark icons (optional, default: "indigo-600")
  - dashColorComparison: Color for the dash icons (optional, default: "gray-400")
  - togglePrice: Boolean to control whether to show the monthly/annual pricing toggle (optional, default: false)
  - tiersComparison: Array of tier objects (optional, includes defaults)
    - name: Name of the tier
    - id: ID for accessibility
    - emphasized: Boolean to indicate if this is the emphasized tier
    - monthlyPrice: The monthly price to display
    - annualPrice: The annual price to display (only shown when togglePrice is true)
    - interval: The price interval text (e.g. "/month")
    - cta: Object with text and url for the call-to-action button
    - ctaColor: Color for the CTA button text
    - ctaBgColor: Color for the CTA button background (for filled buttons)
    - ctaHoverBgColor: Color for the CTA button hover background (for filled buttons)
    - ctaBorderColor: Color for the CTA button border (for outline buttons)
    - ctaHoverBorderColor: Color for the CTA button hover border (for outline buttons)
  - featureCategories: Array of feature category objects (optional, includes defaults)
    - name: Name of the category
    - features: Array of feature objects
      - name: Name of the feature
      - tiersComparison: Object with tier names as keys and feature values as values
        (can be boolean, string, or number)
@example:
  {{ partial "sections/pricing/with_comparison_table.html" (dict
      "taglineComparison" "Plans"
      "headingComparison" "Find the right plan for your business"
      "descriptionComparison" "Whether you're a startup or enterprise, we have a plan that fits your needs and budget."
      "tiersComparison" (slice
          (dict
              "name" "Basic"
              "id" "tier-basic"
              "emphasized" false
              "cta" (dict "text" "Get started" "url" "/signup/basic")
              "ctaColor" "indigo-600"
              "ctaBorderColor" "indigo-200"
              "ctaHoverBorderColor" "indigo-300"
          )
          (dict
              "name" "Pro"
              "id" "tier-pro"
              "emphasized" true
              "cta" (dict "text" "Get started" "url" "/signup/pro")
              "ctaColor" "white"
              "ctaBgColor" "indigo-600"
              "ctaHoverBgColor" "indigo-500"
          )
          (dict
              "name" "Enterprise"
              "id" "tier-enterprise"
              "emphasized" false
              "cta" (dict "text" "Contact sales" "url" "/contact")
              "ctaColor" "indigo-600"
              "ctaBorderColor" "indigo-200"
              "ctaHoverBorderColor" "indigo-300"
          )
      )
      "featureCategories" (slice
          (dict
              "name" "Core Features"
              "features" (slice
                  (dict
                      "name" "Storage"
                      "tiersComparison" (dict "Basic" "10GB" "Pro" "50GB" "Enterprise" "Unlimited")
                  )
                  (dict
                      "name" "API access"
                      "tiersComparison" (dict "Basic" false "Pro" true "Enterprise" true)
                  )
              )
          )
          (dict
              "name" "Support"
              "features" (slice
                  (dict
                      "name" "Priority support"
                      "tiersComparison" (dict "Basic" false "Pro" true "Enterprise" true)
                  )
                  (dict
                      "name" "Dedicated account manager"
                      "tiersComparison" (dict "Basic" false "Pro" false "Enterprise" true)
                  )
              )
          )
      )
  ) }}
@note: This section automatically adapts between mobile and desktop views. On mobile, each tier is displayed as a card in a vertical stack, while on desktop it shows a full comparison table. The emphasized tier is visually highlighted to draw attention to your recommended plan.
*/}}

{{/*
  With Comparison Table Pricing Section

  Parameters:
  - taglineComparison: Text above the heading (default: "Our Plans")
  - headingComparison: Main heading text (default: "Compare plans")
  - descriptionComparison: Text below the heading (default: "Check out our plan comparisons and select the best one for you")
  - backgroundColorComparison: Background color for the section (default: "white")
  - taglineColorComparison: Color for the tagline text (default: "indigo-600")
  - headingColorComparison: Color for the heading text (default: "gray-900")
  - descriptionColorComparison: Color for the description text (default: "gray-600")
  - checkColorComparison: Color for the checkmark icons (default: "primary")
  - dashColorComparison: Color for the dash icons (default: "gray-400")
  - togglePrice: Boolean to control whether to show the monthly/annual pricing toggle (default: false)
  - tiersComparison: Array of tier configurations, each with:
    - name: Name of the tier
    - id: ID for accessibility
    - emphasized: Boolean to indicate if this is the emphasized tier
    - monthlyPrice: The monthly price to display
    - annualPrice: The annual price to display (only shown when togglePrice is true)
    - interval: The price interval text (e.g. "/month")
    - cta: Object with text and url for the call-to-action button
    - ctaColor: Color for the CTA button text
    - ctaBgColor: Color for the CTA button background (for filled buttons)
    - ctaHoverBgColor: Color for the CTA button hover background (for filled buttons)
    - ctaBorderColor: Color for the CTA button border (for outline buttons)
    - ctaHoverBorderColor: Color for the CTA button hover border (for outline buttons)
  - featureCategories: Array of feature categories, each with:
    - name: Name of the category
    - features: Array of features, each with:
      - name: Name of the feature
      - tiersComparison: Object with tier names as keys and feature values as values
        (can be boolean, string, or number)
*/}}

{{ $taglineComparison := .taglineComparison | default "" }}
{{ $headingComparison := .headingComparison | default "Pricing that grows with you" }}
{{ $descriptionComparison := .descriptionComparison | default "Choose an affordable plan that's packed with the best features for engaging your audience, creating customer loyalty, and driving sales." }}
{{ $backgroundColorComparison := .backgroundColorComparison | default "white" }}
{{ $taglineColorComparison := .taglineColorComparison| default "primary" }}
{{ $headingColorComparison := .headingColorComparison | default "gray-900" }}
{{ $descriptionColorComparison := .descriptionColorComparison | default "gray-600" }}
{{ $checkColorComparison := .checkColorComparison | default "primary" }}
{{ $dashColorComparison := .dashColorComparison | default "gray-400" }}
{{ $toggleTextColor := .toggleTextColor | default "gray-500" }}
{{ $toggleActiveColor := .toggleActiveColor | default "white" }}
{{ $toggleActiveBgColor := .toggleActiveBgColor | default "indigo-600" }}
{{ $toggleBorderColor := .toggleBorderColor | default "gray-200" }}
{{ $togglePrice := .togglePrice | default true }}
{{ $tiersComparison := .tiersComparison | default (slice
    (dict
        "name" "Starter"
        "id" "tier-comparison-small"
        "emphasized" false
        "monthlyPrice" "$19"
        "annualPrice" "$15"
        "interval" "/month"
        "cta" (dict
            "text" "Try for free"
            "url" "/trial"
        )
        "ctaColor" "primary"
        "ctaBorderColor" "primary-light"
        "ctaHoverBorderColor" "primary"
    )
    (dict
        "name" "Pro"
        "id" "tier-comparison-medium"
        "monthlyPrice" "$35"
        "annualPrice" "$29"
        "interval" "/month"
        "emphasized" false
        "cta" (dict
            "text" "Try for free"
            "url" "/trial"
        )
        "ctaColor" "primary"
        "ctaBorderColor" "primary-light"
        "ctaHoverBorderColor" "primary"
    )
    (dict
        "name" "Premium"
        "id" "tier-comparison-large"
        "monthlyPrice" "$59"
        "annualPrice" "$49"
        "interval" "/month"
        "emphasized" true
        "cta" (dict
            "text" "Try for free"
            "url" "/trial"
        )
        "ctaColor" "white"
        "ctaBgColor" "primary"
        "ctaHoverBgColor" "primary-dark"
    )
    (dict
        "name" "Enterprise"
        "id" "tier-comparison-large"
        "monthlyPrice" "$59"
        "annualPrice" "$49"
        "interval" "/month"
        "emphasized" false
        "cta" (dict
            "text" "Try for free"
            "url" "/trial"
        )
        "ctaColor" "white"
        "ctaBgColor" "primary"
        "ctaHoverBgColor" "primary-dark"
    )
)}}

{{ $featureCategories := .featureCategories | default (slice
    (dict
        "name" "Limits"
        "features" (slice
        (dict
                "name" "Credits"
                "tooltip" "The number of credits included in the plan. 1 credit equals to approximately $1, enough to generate up to 5 images or more."
                "tiersComparison" (dict "Starter" "20" "Pro" "100" "Premium" "600" "Enterprise" "Unlimited")
                )
        (dict
                "name" "Typical image output"
                "tooltip" "This number is only a rough estimate, not a hard limit. The final number is fully dependent on the models you use an other settings."
                "tiersComparison" (dict "Starter" "up to 100" "Pro" "Up to 500" "Premium" "Up to 5 000" "Enterprise" "Unlimited")
                )
        (dict
                "name" "Charater training slots"
                "tooltip" "Characters are custom profiles trained on photos of a person. Each character lets you generate new photos based on that personâ€™s face."
                "tiersComparison" (dict "Starter" "1" "Pro" "50" "Premium" "100" "Enterprise" "Unlimited")
                )
        (dict
                "name" "FlowHunt AI Studio plan"
                "tooltip" "With each Photomatic plan, you also get complimentary access to equivalent FlowHunt AI studio plan. FlowHunt's AI studio is an automation platform and chatbot builder, allowing you to create hundreds of AI tools. "
                "tiersComparison" (dict "Starter" "Starter AI Studio" "Pro" "Pro AI Studio" "Premium" "Premium AI Studio" "Enterprise" "Enterprise AI studio")
                )
        (dict
                "name" "Workspaces"
                "tiersComparison" (dict "Starter" "1" "Pro" "5" "Premium" "10" "Enterprise" "Unlimited")
                )
        (dict
                "name" "Team members per workspace"
                "tiersComparison" (dict "Starter" "1" "Pro" "10" "Premium" "100" "Enterprise" "Unlimited")
                )
        )
    )
    (dict
        "name" "Features"
        "features" (slice
        (dict
                "name" "Access to all supported image generation models"
                "tooltip" "Photomatic supports all the lastest image generation models from all major providers."
                "tiersComparison" (dict "Starter" true "Pro" true  "Premium" true "Enterprise" true)
                )
        (dict
                "name" "Custom training"
                "tooltip" "Photomatic allows you to train AI models on your pictures."
                "tiersComparison" (dict "Starter" true "Pro" true  "Premium" true "Enterprise" true)
                )
        (dict
                "name" "Access to all styles and effects"
                "tooltip" "There's more than a hundred of styles and effects you can pick from."
                "tiersComparison" (dict "Starter" true "Pro" true  "Premium" true "Enterprise" true)
                )
         (dict
                "name" "Automated workflows with AI Agents"
                "tooltip" "FlowHunt AI Studio allows you to use Photomatic as a component in automatic workflows."
                "tiersComparison" (dict "Starter" true "Pro" true  "Premium" true "Enterprise" true)
                )

        (dict
                "name" "Analytics"
                "tiersComparison" (dict "Starter" false "Pro" true  "Premium" true "Enterprise" true)
                )
        (dict
                "name" "API access"
               "tiersComparison" (dict "Starter" false "Pro" true  "Premium" true "Enterprise" true)
                )
        )
    )
       (dict
        "name" "Support"
        "features" (slice
        (dict
                "name" "Email Support"
                "tiersComparison" (dict "Starter" true "Pro" true  "Premium" true "Enterprise" true)
                )
        (dict
                "name" "Dedicated Support"
                "tiersComparison" (dict "Starter" false "Pro" false  "Premium" true "Enterprise" true)
                )
        (dict
                "name" "Custom Development "
                "tiersComparison" (dict "Starter" false "Pro" false  "Premium" false "Enterprise" true)
                )
         (dict
                "name" "Personal Training"
                "tiersComparison" (dict "Starter" false "Pro" false  "Premium" false "Enterprise" true)
                )
        )
    )
    )
}}

<div id="comparison-table" class="bg-{{ $backgroundColorComparison }} py-12">
    <div class="mx-auto max-w-7xl">
        <div class="mx-auto max-w-4xl text-center">
            {{ if $headingComparison }}
                <h2 class="text-base/7 font-semibold text-{{ $taglineColorComparison }}">{{ $taglineComparison }}</h2>
            {{ end }}
            <p class="mt-2 mb-2 text-5xl font-semibold tracking-tight text-balance text-{{ $headingColorComparison }} sm:text-6xl">{{ $headingComparison }}</p>
        </div>
        <p class="mx-auto mt-6 max-w-2xl text-center text-lg font-medium text-pretty text-{{ $descriptionColorComparison }} sm:text-xl/8">{{ $descriptionComparison }}</p>
        <div class="mt-8 flex justify-center">
            {{ if $togglePrice }}
            <fieldset aria-label="Payment frequency">
                <div class="grid grid-cols-2 gap-x-1 rounded-full p-1 text-center text-xs/5 font-semibold ring-1 ring-{{ $toggleBorderColor }} ring-inset">
                    <!-- Monthly option -->
                    <label class="cursor-pointer rounded-full px-2.5 py-1 bg-{{ $toggleActiveBgColor }} text-{{ $toggleActiveColor }}" id="monthly-label">
                        <input type="radio" name="frequency" value="monthly" class="sr-only" checked>
                        <span>Monthly</span>
                    </label>
                    <!-- Annual option -->
                    <label class="cursor-pointer rounded-full px-2.5 py-1 text-{{ $toggleTextColor }}" id="annually-label">
                        <input type="radio" name="frequency" value="annually" class="sr-only">
                        <span>Annually</span>
                    </label>
                </div>
            </fieldset>
            {{ end }}
        </div>
        <!-- Mobile view (xs to lg) -->
        <div class="mx-auto mt-12 max-w-md space-y-8 sm:mt-16 lg:hidden">
            {{ range $index, $tier := $tiersComparison }}
                {{ $bgClass := "" }}
                {{ $ringClass := "ring-1 ring-gray-200" }}
                {{ if $tier.emphasized }}
                    {{ $bgClass = "bg-gray-400/5" }}
                    {{ $ringClass = "ring-1 ring-gray-200 ring-inset" }}
                {{ end }}
                <section class="{{ $bgClass }} {{ if $tier.emphasized }}rounded-xl{{ end }} p-8 {{ $ringClass }}">
                    <h3 id="{{ $tier.id }}"
                        class="text-sm/6 font-semibold text-{{ if $tier.emphasized }}{{ $taglineColorComparison }}{{ else }}gray-900{{ end }}">{{ $tier.name }}</h3>
                    <p class="mt-6 flex items-baseline gap-x-1">
                        {{ if $togglePrice }}
                        <!-- Monthly price (default visible) -->
                        <span class="text-4xl font-semibold tracking-tight text-{{ $tier.priceColor }} monthly-price">{{ $tier.monthlyPrice }}</span>
                        <!-- Annual price (hidden by default) -->
                        <span class="text-4xl font-semibold tracking-tight text-{{ $tier.priceColor }} annual-price hidden">{{ $tier.annualPrice }}</span>
                        {{ else }}
                        <!-- Only monthly price when toggle is disabled -->
                        <span class="text-4xl font-semibold tracking-tight text-{{ $tier.priceColor }}">{{ $tier.monthlyPrice }}</span>
                        {{ end }}
                        <!-- Interval -->
                        <span class="text-sm/6 font-semibold text-{{ $tier.intervalColor }}">{{ $tier.interval }}</span>
                    </p>
                    {{ if $tier.emphasized }}
                        <a href="{{ $tier.cta.url }}" aria-describedby="{{ $tier.id }}"
                           class="mt-8 not-prose block rounded-md bg-{{ $tier.ctaBgColor }} px-3 py-2 text-center text-sm/6 font-semibold text-{{ $tier.ctaColor }} hover:bg-{{ $tier.ctaHoverBgColor }} focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">{{ $tier.cta.text }}</a>
                    {{ else }}
                        <a href="{{ $tier.cta.url }}" aria-describedby="{{ $tier.id }}"
                           class="mt-8 not-prose block rounded-md px-3 py-2 text-center text-sm/6 font-semibold text-{{ $tier.ctaColor }} ring-1 ring-{{ $tier.ctaBorderColor }} ring-inset hover:ring-{{ $tier.ctaHoverBorderColor }} focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">{{ $tier.cta.text }}</a>
                    {{ end }}

                    {{ $hasFeaturesForTier := false }}
                    {{ range $categoryIndex, $category := $featureCategories }}
                        {{ range $featureIndex, $feature := $category.features }}
                            {{ if isset $feature.tiersComparison $tier.name }}
                                {{ if index $feature.tiersComparison $tier.name }}
                                    {{ $hasFeaturesForTier = true }}
                                    {{ break }}
                                {{ end }}
                            {{ end }}
                        {{ end }}
                        {{ if $hasFeaturesForTier }}
                            {{ break }}
                        {{ end }}
                    {{ end }}
                    
                    {{ if $hasFeaturesForTier }}
                    <ul role="list" class="mt-10 pl-0 space-y-6 text-sm/6 text-gray-900">
                        {{ range $categoryIndex, $category := $featureCategories }}
                            <!-- Check if this category has features for this tier -->
                            {{ $hasFeaturesInCategory := false }}
                            {{ range $featureIndex, $feature := $category.features }}
                                {{ if isset $feature.tiersComparison $tier.name }}
                                    {{ if index $feature.tiersComparison $tier.name }}
                                        {{ $hasFeaturesInCategory = true }}
                                        {{ break }}
                                    {{ end }}
                                {{ end }}
                            {{ end }}
                            
                            {{ if $hasFeaturesInCategory }}
                            <li class="flex flex-col pl-0">
                                <h4 class="font-semibold text-gray-900 pb-2 border-b border-gray-200 mb-3">{{ $category.name }}</h4>
                                <ul role="list" class="pl-0 space-y-4">
                                    {{ range $featureIndex, $feature := $category.features }}
                                        {{ if isset $feature.tiersComparison $tier.name }}
                                            {{ $tierValue := index $feature.tiersComparison $tier.name }}
                                            {{ if $tierValue }}
                                                <li class="flex gap-x-3 pl-0">
                                                    <svg class="h-6 w-5 flex-none text-{{ $checkColorComparison }}"
                                                         viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
                                                         data-slot="icon">
                                                        <path fill-rule="evenodd"
                                                              d="M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z"
                                                              clip-rule="evenodd"/>
                                                    </svg>
                                                    <span>
                                                        {{ if $feature.tooltip }}
                                                            {{ partial "components/tooltip/tooltip.html" (dict "content" $feature.name "text" $feature.tooltip) }}
                                                        {{ else }}
                                                            {{ $feature.name }}
                                                        {{ end }}
                                                        {{ if ne $tierValue true }}
                                                            <span class="text-sm/6 text-gray-500">({{ $tierValue }})</span>
                                                        {{ end }}
                                                    </span>
                                                </li>
                                            {{ end }}
                                        {{ end }}
                                    {{ end }}
                                </ul>
                            </li>
                            {{ end }}
                        {{ end }}
                    </ul>
                    {{ end }}
                </section>
            {{ end }}
        </div>

        <!-- Desktop view (lg+) -->
        <div class="isolate mt-20 hidden lg:block">
            <div class="relative -mx-8">
                {{ $columnCount := add (len $tiersComparison) 1 }}
                {{ range $index, $tier := $tiersComparison }}
                        {{ if $tier.emphasized }}
                                {{ $columnWidth := div 100 $columnCount }}
                                {{ $marginLeft := mul $columnWidth (add $index 1) }}
                                <div
                                        class="pointer-events-none absolute top-0 left-0 -z-10 h-full px-4"
                                        style="width: {{ $columnWidth }}%; margin-left: {{ $marginLeft }}%;">
                                        <div class="w-full rounded-t-xl border-x border-t border-gray-900/10 bg-gray-400/5 h-full"></div>
                                </div>
                        {{ end }}
                {{ end }}
                <table class="w-full table-fixed border-separate border-spacing-x-8 text-left">
                    <caption class="sr-only">
                        Pricing plan comparison
                    </caption>
                    <colgroup>
                        <col class="w-1/4">
                        {{ range $tiersComparison }}
                            <col class="w-1/4">
                        {{ end }}
                    </colgroup>
                    <thead>
                    <tr>
                        <td></td>
                        {{ range $tiersComparison }}
                            <th scope="col" class="px-6 pt-6 xl:px-8 xl:pt-8">
                                <div class="text-sm/7 font-semibold text-gray-900">{{ .name }}</div>
                            </th>
                        {{ end }}
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                       <th scope="row"><span class="sr-only">Price</span></th>
                        {{ range $tier := $tiersComparison }}
                                <td class="px-6 pt-2 xl:px-8">
                                <p class="mt-6 flex items-baseline gap-x-1">
                                        {{ if $togglePrice }}
                                        <!-- Monthly price (default visible) -->
                                        <span class="text-4xl font-semibold tracking-tight text-{{ $tier.priceColor }} monthly-price">{{ $tier.monthlyPrice }}</span>
                                        <!-- Annual price (hidden by default) -->
                                        <span class="text-4xl font-semibold tracking-tight text-{{ $tier.priceColor }} annual-price hidden">{{ $tier.annualPrice }}</span>
                                        {{ else }}
                                        <!-- Only monthly price when toggle is disabled -->
                                        <span class="text-4xl font-semibold tracking-tight text-{{ $tier.priceColor }}">{{ $tier.monthlyPrice }}</span>
                                        {{ end }}
                                        <!-- Interval -->
                                        <span class="text-sm/6 font-semibold text-{{ $tier.intervalColor }}">{{ $tier.interval }}</span>
                                </p>
                                {{ if $tier.emphasized }}
                                        <a href="{{ $tier.cta.url }}"
                                                class="mt-8 not-prose block rounded-md bg-{{ $tier.ctaBgColor }} px-3 py-2 text-center text-sm/6 font-semibold text-{{ $tier.ctaColor }} hover:bg-{{ $tier.ctaHoverBgColor }} focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">{{ $tier.cta.text }}</a>
                                {{ else }}
                                        <a href="{{ $tier.cta.url }}"
                                                class="mt-8 not-prose block rounded-md px-3 py-2 text-center text-sm/6 font-semibold text-{{ $tier.ctaColor }} ring-1 ring-{{ $tier.ctaBorderColor }} ring-inset hover:ring-{{ $tier.ctaHoverBorderColor }} focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">{{ $tier.cta.text }}</a>
                                {{ end }}
                            </td>
                        {{ end }}
                    </tr>

                    {{ range $categoryIndex, $category := $featureCategories }}
                        <tr>
                            <th scope="colgroup" colspan="{{ add (len $tiersComparison) 1 }}"
                                class="pt-{{ if eq $categoryIndex 0 }}8{{ else }}16{{ end }} pb-4 text-sm/6 font-semibold text-gray-900">
                                {{ $category.name }}
                                <div class="absolute inset-x-8 mt-4 h-px bg-gray-900/10"></div>
                            </th>
                        </tr>

                        {{ range $featureIndex, $feature := $category.features }}
                            <tr>
                                <th scope="row" class="not-prose py-4 text-sm/6 font-normal text-gray-900">
                                    {{ if $feature.tooltip }}
                                        {{ partial "components/tooltip/tooltip.html" (dict "content" $feature.name "text" $feature.tooltip) }}
                                    {{ else }}
                                        {{ $feature.name }}
                                    {{ end }}
                                    <div class="absolute inset-x-8 mt-4 h-px bg-gray-900/5"></div>
                                </th>

                                {{ range $tierIndex, $tier := $tiersComparison }}
                                    {{ $tierValue := index $feature.tiersComparison $tier.name }}
                                    <td class="px-6 py-4 xl:px-8">
                                        {{ if eq $tierValue true }}
                                            <svg class="mx-auto size-5 text-{{ $checkColorComparison }}" viewBox="0 0 20 20"
                                                 fill="currentColor" aria-hidden="true" data-slot="icon">
                                                <path fill-rule="evenodd"
                                                      d="M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z"
                                                      clip-rule="evenodd"/>
                                            </svg>
                                            <span class="sr-only">Included in {{ $tier.name }}</span>
                                        {{ else if eq $tierValue false }}
                                            <svg class="mx-auto size-5 text-{{ $dashColorComparison }}" viewBox="0 0 20 20"
                                                 fill="currentColor" aria-hidden="true" data-slot="icon">
                                                <path fill-rule="evenodd"
                                                      d="M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z"
                                                      clip-rule="evenodd"/>
                                            </svg>
                                            <span class="sr-only">Not included in {{ $tier.name }}</span>
                                        {{ else }}
                                            <div class="text-center text-sm/6 text-gray-500">{{ $tierValue }}</div>
                                        {{ end }}
                                    </td>
                                {{ end }}
                            </tr>
                        {{ end }}
                    {{ end }}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

{{ if $togglePrice }}
<!-- JavaScript for toggle functionality -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const monthlyLabel = document.getElementById('monthly-label');
    const annuallyLabel = document.getElementById('annually-label');
    const monthlyPrices = document.querySelectorAll('.monthly-price');
    const annualPrices = document.querySelectorAll('.annual-price');
    
    // Function to toggle between monthly and annual pricing
    function togglePricing(isMonthly) {
      if (isMonthly) {
        monthlyLabel.classList.add('bg-{{ $toggleActiveBgColor }}', 'text-{{ $toggleActiveColor }}');
        monthlyLabel.classList.remove('text-{{ $toggleTextColor }}');
        annuallyLabel.classList.remove('bg-{{ $toggleActiveBgColor }}', 'text-{{ $toggleActiveColor }}');
        annuallyLabel.classList.add('text-{{ $toggleTextColor }}');
        
        monthlyPrices.forEach(el => el.classList.remove('hidden'));
        annualPrices.forEach(el => el.classList.add('hidden'));
      } else {
        annuallyLabel.classList.add('bg-{{ $toggleActiveBgColor }}', 'text-{{ $toggleActiveColor }}');
        annuallyLabel.classList.remove('text-{{ $toggleTextColor }}');
        monthlyLabel.classList.remove('bg-{{ $toggleActiveBgColor }}', 'text-{{ $toggleActiveColor }}');
        monthlyLabel.classList.add('text-{{ $toggleTextColor }}');
        
        monthlyPrices.forEach(el => el.classList.add('hidden'));
        annualPrices.forEach(el => el.classList.remove('hidden'));
      }
    }
    
    // Set up event listeners for the toggle
    monthlyLabel.addEventListener('click', function() {
      togglePricing(true);
    });
    
    annuallyLabel.addEventListener('click', function() {
      togglePricing(false);
    });
    
    // Initialize with monthly pricing
    togglePricing(true);
  });
</script>
{{ end }}

<!-- JavaScript for mobile tooltips -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    if (window.innerWidth > 1023) return;

    const style = document.createElement('style');
    style.textContent = `
      .tooltip-content.mobile-visible {
        opacity: 1 !important;
        pointer-events: auto !important;
      }
    `;
    document.head.appendChild(style);

    document.addEventListener('click', function (e) {
      const trigger = e.target.closest('.tooltip-trigger');

      if (trigger) {
        const group = trigger.closest('.group');
        const content = group?.querySelector('.tooltip-content');

        document.querySelectorAll('.tooltip-content.mobile-visible').forEach(tip => {
          if (tip !== content) tip.classList.remove('mobile-visible');
        });

        if (content) content.classList.toggle('mobile-visible');
        e.stopPropagation();
      } else {
        document.querySelectorAll('.tooltip-content.mobile-visible').forEach(tip => {
          tip.classList.remove('mobile-visible');
        });
      }
    });
  });
</script>