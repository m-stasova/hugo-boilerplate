{{/* Language Selector Partial */}}
{{ $hasMultipleLanguages := gt (len site.Home.AllTranslations) 1 }}

{{ if $hasMultipleLanguages }}
<div class="language-selector">
  <div class="flex flex-wrap items-center justify-center gap-3">
    {{ if .Translations }}
      <!-- Use page translations when available -->
      {{ range .Translations }}
        {{ $lang := .Language.Lang }}
        <!-- Default flag emoji mapping -->
        {{ $flagEmoji := "ğŸ³ï¸" }}
        
        <!-- European Languages -->
        {{ if eq $lang "en" }}{{ $flagEmoji = "ğŸ‡¬ğŸ‡§" }} <!-- English (UK) -->
        {{ else if eq $lang "en-us" }}{{ $flagEmoji = "ğŸ‡ºğŸ‡¸" }} <!-- English (US) -->
        {{ else if eq $lang "de" }}{{ $flagEmoji = "ğŸ‡©ğŸ‡ª" }} <!-- German -->
        {{ else if eq $lang "de-at" }}{{ $flagEmoji = "ğŸ‡¦ğŸ‡¹" }} <!-- Austrian German -->
        {{ else if eq $lang "fr" }}{{ $flagEmoji = "ğŸ‡«ğŸ‡·" }} <!-- French -->
        {{ else if eq $lang "es" }}{{ $flagEmoji = "ğŸ‡ªğŸ‡¸" }} <!-- Spanish -->
        {{ else if eq $lang "it" }}{{ $flagEmoji = "ğŸ‡®ğŸ‡¹" }} <!-- Italian -->
        {{ else if eq $lang "pt" }}{{ $flagEmoji = "ğŸ‡µğŸ‡¹" }} <!-- Portuguese -->
        {{ else if eq $lang "nl" }}{{ $flagEmoji = "ğŸ‡³ğŸ‡±" }} <!-- Dutch -->
        {{ else if eq $lang "be" }}{{ $flagEmoji = "ğŸ‡§ğŸ‡ª" }} <!-- Belgian -->
        {{ else if eq $lang "lu" }}{{ $flagEmoji = "ğŸ‡±ğŸ‡º" }} <!-- Luxembourgish -->
        {{ else if eq $lang "da" }}{{ $flagEmoji = "ğŸ‡©ğŸ‡°" }} <!-- Danish -->
        {{ else if eq $lang "sv" }}{{ $flagEmoji = "ğŸ‡¸ğŸ‡ª" }} <!-- Swedish -->
        {{ else if eq $lang "fi" }}{{ $flagEmoji = "ğŸ‡«ğŸ‡®" }} <!-- Finnish -->
        {{ else if eq $lang "no" }}{{ $flagEmoji = "ğŸ‡³ğŸ‡´" }} <!-- Norwegian -->
        {{ else if eq $lang "is" }}{{ $flagEmoji = "ğŸ‡®ğŸ‡¸" }} <!-- Icelandic -->
        {{ else if eq $lang "el" }}{{ $flagEmoji = "ğŸ‡¬ğŸ‡·" }} <!-- Greek -->
        {{ else if eq $lang "cs" }}{{ $flagEmoji = "ğŸ‡¨ğŸ‡¿" }} <!-- Czech -->
        {{ else if eq $lang "sk" }}{{ $flagEmoji = "ğŸ‡¸ğŸ‡°" }} <!-- Slovak -->
        {{ else if eq $lang "pl" }}{{ $flagEmoji = "ğŸ‡µğŸ‡±" }} <!-- Polish -->
        {{ else if eq $lang "hu" }}{{ $flagEmoji = "ğŸ‡­ğŸ‡º" }} <!-- Hungarian -->
        {{ else if eq $lang "ro" }}{{ $flagEmoji = "ğŸ‡·ğŸ‡´" }} <!-- Romanian -->
        {{ else if eq $lang "bg" }}{{ $flagEmoji = "ğŸ‡§ğŸ‡¬" }} <!-- Bulgarian -->
        {{ else if eq $lang "hr" }}{{ $flagEmoji = "ğŸ‡­ğŸ‡·" }} <!-- Croatian -->
        {{ else if eq $lang "sl" }}{{ $flagEmoji = "ğŸ‡¸ğŸ‡®" }} <!-- Slovenian -->
        {{ else if eq $lang "sr" }}{{ $flagEmoji = "ğŸ‡·ğŸ‡¸" }} <!-- Serbian -->
        {{ else if eq $lang "mk" }}{{ $flagEmoji = "ğŸ‡²ğŸ‡°" }} <!-- Macedonian -->
        {{ else if eq $lang "sq" }}{{ $flagEmoji = "ğŸ‡¦ğŸ‡±" }} <!-- Albanian -->
        {{ else if eq $lang "et" }}{{ $flagEmoji = "ğŸ‡ªğŸ‡ª" }} <!-- Estonian -->
        {{ else if eq $lang "lv" }}{{ $flagEmoji = "ğŸ‡±ğŸ‡»" }} <!-- Latvian -->
        {{ else if eq $lang "lt" }}{{ $flagEmoji = "ğŸ‡±ğŸ‡¹" }} <!-- Lithuanian -->
        {{ else if eq $lang "mt" }}{{ $flagEmoji = "ğŸ‡²ğŸ‡¹" }} <!-- Maltese -->
        {{ else if eq $lang "ga" }}{{ $flagEmoji = "ğŸ‡®ğŸ‡ª" }} <!-- Irish -->
        {{ else if eq $lang "cy" }}{{ $flagEmoji = "ğŸ‡¬ğŸ‡§" }} <!-- Welsh (UK) -->
        {{ else if eq $lang "gd" }}{{ $flagEmoji = "ğŸ‡¬ğŸ‡§" }} <!-- Scottish Gaelic (UK) -->
        {{ else if eq $lang "ru" }}{{ $flagEmoji = "ğŸ‡·ğŸ‡º" }} <!-- Russian -->
        {{ else if eq $lang "uk" }}{{ $flagEmoji = "ğŸ‡ºğŸ‡¦" }} <!-- Ukrainian -->
        {{ else if eq $lang "by" }}{{ $flagEmoji = "ğŸ‡§ğŸ‡¾" }} <!-- Belarusian -->
        {{ else if eq $lang "tr" }}{{ $flagEmoji = "ğŸ‡¹ğŸ‡·" }} <!-- Turkish -->
        {{ end }}
        
        <a href="{{ .Permalink }}" 
           class="inline-flex items-center text-xl hover:opacity-75 transition-opacity" 
           title="{{ .Language.LanguageName }}"
           aria-label="{{ .Language.LanguageName }}">
          <span role="img" aria-hidden="true">{{ $flagEmoji }}</span>
        </a>
      {{ end }}
    {{ else }}
      <!-- Fallback to all site languages -->
      {{ range .Site.Home.AllTranslations }}
        {{ if ne .Language.Lang $.Site.Language.Lang }}
          {{ $lang := .Language.Lang }}
          <!-- Default flag emoji mapping -->
          {{ $flagEmoji := "ğŸ³ï¸" }}
          
          <!-- European Languages -->
          {{ if eq $lang "en" }}{{ $flagEmoji = "ğŸ‡¬ğŸ‡§" }} <!-- English (UK) -->
          {{ else if eq $lang "en-us" }}{{ $flagEmoji = "ğŸ‡ºğŸ‡¸" }} <!-- English (US) -->
          {{ else if eq $lang "de" }}{{ $flagEmoji = "ğŸ‡©ğŸ‡ª" }} <!-- German -->
          {{ else if eq $lang "de-at" }}{{ $flagEmoji = "ğŸ‡¦ğŸ‡¹" }} <!-- Austrian German -->
          {{ else if eq $lang "fr" }}{{ $flagEmoji = "ğŸ‡«ğŸ‡·" }} <!-- French -->
          {{ else if eq $lang "es" }}{{ $flagEmoji = "ğŸ‡ªğŸ‡¸" }} <!-- Spanish -->
          {{ else if eq $lang "it" }}{{ $flagEmoji = "ğŸ‡®ğŸ‡¹" }} <!-- Italian -->
          {{ else if eq $lang "pt" }}{{ $flagEmoji = "ğŸ‡µğŸ‡¹" }} <!-- Portuguese -->
          {{ else if eq $lang "nl" }}{{ $flagEmoji = "ğŸ‡³ğŸ‡±" }} <!-- Dutch -->
          {{ else if eq $lang "be" }}{{ $flagEmoji = "ğŸ‡§ğŸ‡ª" }} <!-- Belgian -->
          {{ else if eq $lang "lu" }}{{ $flagEmoji = "ğŸ‡±ğŸ‡º" }} <!-- Luxembourgish -->
          {{ else if eq $lang "da" }}{{ $flagEmoji = "ğŸ‡©ğŸ‡°" }} <!-- Danish -->
          {{ else if eq $lang "sv" }}{{ $flagEmoji = "ğŸ‡¸ğŸ‡ª" }} <!-- Swedish -->
          {{ else if eq $lang "fi" }}{{ $flagEmoji = "ğŸ‡«ğŸ‡®" }} <!-- Finnish -->
          {{ else if eq $lang "no" }}{{ $flagEmoji = "ğŸ‡³ğŸ‡´" }} <!-- Norwegian -->
          {{ else if eq $lang "is" }}{{ $flagEmoji = "ğŸ‡®ğŸ‡¸" }} <!-- Icelandic -->
          {{ else if eq $lang "el" }}{{ $flagEmoji = "ğŸ‡¬ğŸ‡·" }} <!-- Greek -->
          {{ else if eq $lang "cs" }}{{ $flagEmoji = "ğŸ‡¨ğŸ‡¿" }} <!-- Czech -->
          {{ else if eq $lang "sk" }}{{ $flagEmoji = "ğŸ‡¸ğŸ‡°" }} <!-- Slovak -->
          {{ else if eq $lang "pl" }}{{ $flagEmoji = "ğŸ‡µğŸ‡±" }} <!-- Polish -->
          {{ else if eq $lang "hu" }}{{ $flagEmoji = "ğŸ‡­ğŸ‡º" }} <!-- Hungarian -->
          {{ else if eq $lang "ro" }}{{ $flagEmoji = "ğŸ‡·ğŸ‡´" }} <!-- Romanian -->
          {{ else if eq $lang "bg" }}{{ $flagEmoji = "ğŸ‡§ğŸ‡¬" }} <!-- Bulgarian -->
          {{ else if eq $lang "hr" }}{{ $flagEmoji = "ğŸ‡­ğŸ‡·" }} <!-- Croatian -->
          {{ else if eq $lang "sl" }}{{ $flagEmoji = "ğŸ‡¸ğŸ‡®" }} <!-- Slovenian -->
          {{ else if eq $lang "sr" }}{{ $flagEmoji = "ğŸ‡·ğŸ‡¸" }} <!-- Serbian -->
          {{ else if eq $lang "mk" }}{{ $flagEmoji = "ğŸ‡²ğŸ‡°" }} <!-- Macedonian -->
          {{ else if eq $lang "sq" }}{{ $flagEmoji = "ğŸ‡¦ğŸ‡±" }} <!-- Albanian -->
          {{ else if eq $lang "et" }}{{ $flagEmoji = "ğŸ‡ªğŸ‡ª" }} <!-- Estonian -->
          {{ else if eq $lang "lv" }}{{ $flagEmoji = "ğŸ‡±ğŸ‡»" }} <!-- Latvian -->
          {{ else if eq $lang "lt" }}{{ $flagEmoji = "ğŸ‡±ğŸ‡¹" }} <!-- Lithuanian -->
          {{ else if eq $lang "mt" }}{{ $flagEmoji = "ğŸ‡²ğŸ‡¹" }} <!-- Maltese -->
          {{ else if eq $lang "ga" }}{{ $flagEmoji = "ğŸ‡®ğŸ‡ª" }} <!-- Irish -->
          {{ else if eq $lang "cy" }}{{ $flagEmoji = "ğŸ‡¬ğŸ‡§" }} <!-- Welsh (UK) -->
          {{ else if eq $lang "gd" }}{{ $flagEmoji = "ğŸ‡¬ğŸ‡§" }} <!-- Scottish Gaelic (UK) -->
          {{ else if eq $lang "ru" }}{{ $flagEmoji = "ğŸ‡·ğŸ‡º" }} <!-- Russian -->
          {{ else if eq $lang "uk" }}{{ $flagEmoji = "ğŸ‡ºğŸ‡¦" }} <!-- Ukrainian -->
          {{ else if eq $lang "by" }}{{ $flagEmoji = "ğŸ‡§ğŸ‡¾" }} <!-- Belarusian -->
          {{ else if eq $lang "tr" }}{{ $flagEmoji = "ğŸ‡¹ğŸ‡·" }} <!-- Turkish -->
          {{ end }}
          
          <a href="{{ .Permalink }}" 
             class="inline-flex items-center text-xl hover:opacity-75 transition-opacity" 
             title="{{ .Language.LanguageName }}"
             aria-label="{{ .Language.LanguageName }}">
            <span role="img" aria-hidden="true">{{ $flagEmoji }}</span>
          </a>
        {{ end }}
      {{ end }}
    {{ end }}
  </div>
</div>
{{ end }}
